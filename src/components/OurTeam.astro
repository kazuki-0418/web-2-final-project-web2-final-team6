---
import TeamMember from "./TeamMember.astro";
import Member1 from "../assets/images/member-1.png";
import Member2 from "../assets/images/member-2.png";
import Member3 from "../assets/images/member-3.png";
import Memeber4 from "../assets/images/member-4.png";
import dribble from "../assets/icons/Dribble.png";
import linkIn from "../assets/icons/LinkedIn.png";
import twitter from "../assets/icons/Twitter.png";

const members = [
  {
    img: Member1,
    imgAlt: "Member 1",
    memberName: "Leslie Alexander",
  },
  {
    img: Member2,
    imgAlt: "Member 2",
    memberName: "Ralph Edwards",
  },
  {
    img: Member3,
    imgAlt: "Member 3",
    memberName: "Annette Black",
  },
  {
    img: Memeber4,
    imgAlt: "Member 4",
    memberName: "Savannah Nguyen",
  },
];
---

<main>
  <h1>Our team</h1>
  <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit.</p>
  <section class="team-members">
    {
      members.map((member, index) => (
        <TeamMember
          img={member.img}
          imgAlt={member.imgAlt}
          memberName={member.memberName}
          isHidden={index > 2}
          icons={[
            { icon: linkIn, link: "https://www.LinkedIn.com" },
            { icon: twitter, link: "https://www.twitter.com" },
            { icon: dribble, link: "https://www.dribble.com" },
          ]}
        />
      ))
    }
    <button class="view" id="view_all">View all</button>
  </section>
  <script>
    const hiddenTeamMembers = document.querySelectorAll('.hidden-team-member')

    const handleResize = () => {
      const displayState = window.innerWidth < 1024 ? "none" : "flex";

      hiddenTeamMembers.forEach((card) => {
        (card as HTMLElement).style.display = displayState;
      });
    };

    // initial checkout
    handleResize();

    window.addEventListener("resize", handleResize);
    const viewAll = document.querySelector(".view");
    if (viewAll) {
      viewAll.addEventListener("click", () => {
        hiddenTeamMembers.forEach(
          (card) => ((card as HTMLElement).style.display = "flex"),
        );
        viewAll.style.display = "none";
      });
    }
  </script>
  <style>
    @import url("https://fonts.googleapis.com/css2?family=Roboto:ital,wght@0,100;0,300;0,400;0,500;0,700;0,900;1,100;1,300;1,400;1,500;1,700;1,900&display=swap");
    main {
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 20px;
      padding: 20px;
    }

    .team-members {
      display: grid;
      grid-template-columns: repeat(2, 1fr);
      gap: 20px;
      padding: 20px;
    }

    .team-member {
      display: flex;
      flex-direction: row;
      gap: 20px;
      padding: 20px;
    }

    .team-member img {
      border-radius: 20px;
    }

    h1 {
      font-family: "Roboto", sans-serif;
      font-size: 2rem;
    }

    h3 {
      display: flex;
      flex-direction: column;
      font-size: 21px;
    }

    .team-member-info {
      display: flex;
      flex-direction: column;
      justify-content: center;
    }
    p {
      margin-top: 0;
    }

    img {
      border-radius: 20px;
    }

    h1 {
      font-family: "Roboto", sans-serif;
      font-size: 2rem;
    }

    @media (min-width: 1024px) {
      .view {
        display: none;
      }
    }

    @media (max-width: 1024px) {
      .team-members {
        grid-template-columns: repeat(1, 1fr);
      }

      p {
        display: flex;
        flex-direction: column;
      }

      .view {
        background-color: #ffffff;
        border: 1px solid #000000;
        color: #000000;
        padding: 15px 32px;
        text-align: center;
        font-size: 16px;
        border-radius: 5px;
      }

      .view:hover {
          background-color: black;
          color: white;
          cursor: pointer;
      }
    }
  </style>
</main>
